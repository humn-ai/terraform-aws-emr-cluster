<!--














  ** DO NOT EDIT THIS FILE
  **
  ** This file was automatically generated by the `build-harness`.
  ** 1) Make all changes to `README.yaml`
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file.
  **
  ** (We maintain HUNDREDS of open source projects. This is how we maintain our sanity.)
  **















  -->

#

[![README Header][logo]][website]

# tf-mod-aws-emr-cluster

## Module description

Terraform module to provision an Elastic MapReduce (EMR) cluster on AWS.

## Usage

**IMPORTANT:** The `master` branch is used in `source` just as an example. In your code, do not pin to `master` because there may be breaking changes between releases.
Instead pin to the release tag (e.g. `?ref=tags/x.y.z`) of one of our [latest releases](https://github.com/humn-ai/tf-mod-aws-emr-cluster/releases).

```hcl
provider "aws" {
  region = "us-east-2"
}

module "vpc" {
  source  = "cloudposse/vpc/aws"
  # Cloud Posse recommends pinning every module to a specific version
  # version     = "x.x.x"

  ipv4_primary_cidr_block = "172.19.0.0/16"

  context = module.this.context
}

module "subnets" {
  source = "cloudposse/dynamic-subnets/aws"
  # Cloud Posse recommends pinning every module to a specific version
  # version     = "x.x.x"

  availability_zones   = var.availability_zones
  vpc_id               = module.vpc.vpc_id
  igw_id               = [module.vpc.igw_id]
  ipv4_cidr_block      = [module.vpc.vpc_cidr_block]
  nat_gateway_enabled  = false
  nat_instance_enabled = false

  context = module.this.context
}

module "s3_log_storage" {
  source = "cloudposse/s3-log-storage/aws"
  # Cloud Posse recommends pinning every module to a specific version
  # version     = "x.x.x"

  region        = var.region
  namespace     = var.namespace
  stage         = var.stage
  name          = var.name
  attributes    = ["logs"]
  force_destroy = true
}

module "aws_key_pair" {
  source = "cloudposse/key-pair/aws"
  # Cloud Posse recommends pinning every module to a specific version
  # version     = "x.x.x"
  namespace           = var.namespace
  stage               = var.stage
  name                = var.name
  attributes          = ["ssh", "key"]
  ssh_public_key_path = var.ssh_public_key_path
  generate_ssh_key    = var.generate_ssh_key
}

module "emr_cluster" {
  source = "cloudposse/emr-cluster/aws"
  # Cloud Posse recommends pinning every module to a specific version
  # version     = "x.x.x"

  namespace                                      = var.namespace
  stage                                          = var.stage
  name                                           = var.name
  master_allowed_security_groups                 = [module.vpc.vpc_default_security_group_id]
  slave_allowed_security_groups                  = [module.vpc.vpc_default_security_group_id]
  region                                         = var.region
  vpc_id                                         = module.vpc.vpc_id
  subnet_id                                      = module.subnets.private_subnet_ids[0]
  route_table_id                                 = module.subnets.private_route_table_ids[0]
  subnet_type                                    = "private"
  ebs_root_volume_size                           = var.ebs_root_volume_size
  visible_to_all_users                           = var.visible_to_all_users
  release_label                                  = var.release_label
  applications                                   = var.applications
  configurations_json                            = var.configurations_json
  core_instance_group_instance_type              = var.core_instance_group_instance_type
  core_instance_group_instance_count             = var.core_instance_group_instance_count
  core_instance_group_ebs_size                   = var.core_instance_group_ebs_size
  core_instance_group_ebs_type                   = var.core_instance_group_ebs_type
  core_instance_group_ebs_volumes_per_instance   = var.core_instance_group_ebs_volumes_per_instance
  master_instance_group_instance_type            = var.master_instance_group_instance_type
  master_instance_group_instance_count           = var.master_instance_group_instance_count
  master_instance_group_ebs_size                 = var.master_instance_group_ebs_size
  master_instance_group_ebs_type                 = var.master_instance_group_ebs_type
  master_instance_group_ebs_volumes_per_instance = var.master_instance_group_ebs_volumes_per_instance
  create_task_instance_group                     = var.create_task_instance_group
  log_uri                                        = format("s3n://%s/", module.s3_log_storage.bucket_id)
  key_name                                       = module.aws_key_pair.key_name
}
```

<!-- markdownlint-disable -->

## Makefile Targets

```text
Available targets:

  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  lint                                Lint terraform code

```

<!-- markdownlint-restore -->

## Requirements

| Name                                                                     | Version   |
| ------------------------------------------------------------------------ | --------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.12.0 |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.14.0 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | ~> 2.0    |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 3.5.0  |
| <a name="requirement_null"></a> [null](#requirement_null)                | ~> 2.0    |
| <a name="requirement_template"></a> [template](#requirement_template)    | ~> 2.0    |

## Providers

| Name                                             | Version         |
| ------------------------------------------------ | --------------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | ~> 2.0 >= 3.5.0 |

## Modules

| Name                                                                                               | Source                                                      | Version     |
| -------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- | ----------- |
| <a name="module_label"></a> [label](#module_label)                                                 | git::https://github.com/cloudposse/terraform-null-label.git | tags/0.25.0 |
| <a name="module_label_alb"></a> [label_alb](#module_label_alb)                                     | git::https://github.com/cloudposse/terraform-null-label.git | tags/0.19.2 |
| <a name="module_label_core"></a> [label_core](#module_label_core)                                  | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_ec2"></a> [label_ec2](#module_label_ec2)                                     | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_ec2_autoscaling"></a> [label_ec2_autoscaling](#module_label_ec2_autoscaling) | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_emr"></a> [label_emr](#module_label_emr)                                     | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_master"></a> [label_master](#module_label_master)                            | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_master_managed"></a> [label_master_managed](#module_label_master_managed)    | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_service_managed"></a> [label_service_managed](#module_label_service_managed) | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_slave"></a> [label_slave](#module_label_slave)                               | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_slave_managed"></a> [label_slave_managed](#module_label_slave_managed)       | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_label_task"></a> [label_task](#module_label_task)                                  | cloudposse/label/null                                       | 0.25.0      |
| <a name="module_this"></a> [this](#module_this)                                                    | cloudposse/label/null                                       | 0.25.0      |

## Resources

| Name                                                                                                                                                             | Type        |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [aws_emr_cluster.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/emr_cluster)                                               | resource    |
| [aws_emr_instance_group.task](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/emr_instance_group)                                    | resource    |
| [aws_iam_instance_profile.ec2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile)                                 | resource    |
| [aws_iam_role.ec2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                                         | resource    |
| [aws_iam_role.ec2_autoscaling](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                             | resource    |
| [aws_iam_role.emr](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                                         | resource    |
| [aws_iam_role_policy_attachment.ec2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)                     | resource    |
| [aws_iam_role_policy_attachment.ec2_autoscaling](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)         | resource    |
| [aws_iam_role_policy_attachment.emr](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment)                     | resource    |
| [aws_lb.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb)                                                                 | resource    |
| [aws_lb_listener.http_redirect](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener)                                         | resource    |
| [aws_lb_listener.https](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener)                                                 | resource    |
| [aws_lb_target_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_target_group)                                       | resource    |
| [aws_lb_target_group_attachment.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_target_group_attachment)                 | resource    |
| [aws_route53_record.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record)                                         | resource    |
| [aws_security_group.alb](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                             | resource    |
| [aws_security_group.managed_master](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                  | resource    |
| [aws_security_group.managed_service_access](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                          | resource    |
| [aws_security_group.managed_slave](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                   | resource    |
| [aws_security_group.master](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                          | resource    |
| [aws_security_group.slave](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                           | resource    |
| [aws_security_group_rule.alb_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                            | resource    |
| [aws_security_group_rule.alb_http_ingress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                      | resource    |
| [aws_security_group_rule.alb_https_ingress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                     | resource    |
| [aws_security_group_rule.managed_master_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                 | resource    |
| [aws_security_group_rule.managed_master_service_access_ingress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule) | resource    |
| [aws_security_group_rule.managed_service_access_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)         | resource    |
| [aws_security_group_rule.managed_slave_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                  | resource    |
| [aws_security_group_rule.master_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                         | resource    |
| [aws_security_group_rule.master_ingress_cidr_blocks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)            | resource    |
| [aws_security_group_rule.master_ingress_security_groups](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)        | resource    |
| [aws_security_group_rule.slave_egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                          | resource    |
| [aws_security_group_rule.slave_ingress_cidr_blocks](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)             | resource    |
| [aws_security_group_rule.slave_ingress_security_groups](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)         | resource    |
| [aws_vpc_endpoint.vpc_endpoint_s3](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/vpc_endpoint)                                     | resource    |
| [aws_iam_policy_document.assume_role_ec2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                    | data source |
| [aws_iam_policy_document.assume_role_emr](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                    | data source |
| [aws_instances.emr_master_instances](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/instances)                                   | data source |
| [aws_partition.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/partition)                                                | data source |

## Inputs

| Name                                                                                                                                                                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Type                                                                                                                                                                                                                                                                                                                                             | Default                                                                                                                                                                                                                                                                                                    | Required |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: |
| <a name="input_additional_info"></a> [additional_info](#input_additional_info)                                                                                              | A JSON string for selecting additional features such as adding proxy information. Note: Currently there is no API to retrieve the value of this argument after EMR cluster creation from provider, therefore Terraform cannot detect drift from the actual EMR cluster if its value is changed outside Terraform                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_additional_master_security_group"></a> [additional_master_security_group](#input_additional_master_security_group)                                           | The id of the existing additional security group that will be used for EMR master node. If empty, a new security group will be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_additional_slave_security_group"></a> [additional_slave_security_group](#input_additional_slave_security_group)                                              | The id of the existing additional security group that will be used for EMR core & task nodes. If empty, a new security group will be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_additional_tag_map"></a> [additional_tag_map](#input_additional_tag_map)                                                                                     | Additional tags for appending to tags_as_list_of_maps. Not added to `tags`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `map(string)`                                                                                                                                                                                                                                                                                                                                    | `{}`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_alb_allow_http_access"></a> [alb_allow_http_access](#input_alb_allow_http_access)                                                                            | If true, allow ELB traffic to port 80.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_alb_allow_https_access"></a> [alb_allow_https_access](#input_alb_allow_https_access)                                                                         | If true, allow ELB traffic to port 443.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_alb_enabled"></a> [alb_enabled](#input_alb_enabled)                                                                                                          | If true, create an Elastic Load Balancer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_alb_internal"></a> [alb_internal](#input_alb_internal)                                                                                                       | If true, create an internal ELB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_alb_target_group_port"></a> [alb_target_group_port](#input_alb_target_group_port)                                                                            | The port for the ALB to route traffic to.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                         | `"80"`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_alb_target_group_protocol"></a> [alb_target_group_protocol](#input_alb_target_group_protocol)                                                                | The protocol for the ALB to use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `"HTTP"`                                                                                                                                                                                                                                                                                                   |    no    |
| <a name="input_alb_target_group_target_type"></a> [alb_target_group_target_type](#input_alb_target_group_target_type)                                                       | The type of target for the ALB to route traffic to.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                         | `"instance"`                                                                                                                                                                                                                                                                                               |    no    |
| <a name="input_applications"></a> [applications](#input_applications)                                                                                                       | A list of applications for the cluster. Valid values are: Flink, Ganglia, Hadoop, HBase, HCatalog, Hive, Hue, JupyterHub, Livy, Mahout, MXNet, Oozie, Phoenix, Pig, Presto, Spark, Sqoop, TensorFlow, Tez, Zeppelin, and ZooKeeper (as of EMR 5.25.0). Case insensitive                                                                                                                                                                                                                                                                                                                                                                                          | `list(string)`                                                                                                                                                                                                                                                                                                                                   | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_attributes"></a> [attributes](#input_attributes)                                                                                                             | Additional attributes (e.g. `1`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_auto_termination_idle_timeout"></a> [auto_termination_idle_timeout](#input_auto_termination_idle_timeout)                                                    | Auto termination policy idle timeout in seconds (60 - 604800 supported)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_bootstrap_action"></a> [bootstrap_action](#input_bootstrap_action)                                                                                           | List of bootstrap actions that will be run before Hadoop is started on the cluster nodes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | <pre>list(object({<br> path = string<br> name = string<br> args = list(string)<br> }))</pre>                                                                                                                                                                                                                                                     | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_configurations_json"></a> [configurations_json](#input_configurations_json)                                                                                  | A JSON string for supplying list of configurations for the EMR cluster. See https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-configure-apps.html for more details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_context"></a> [context](#input_context)                                                                                                                      | Single object for setting entire context at once.<br>See description of individual variables for details.<br>Leave string and numeric variables as `null` to use default value.<br>Individual variable settings (non-null) override settings in context object,<br>except for attributes, tags, and additional_tag_map, which are merged.                                                                                                                                                                                                                                                                                                                        | <pre>object({<br> enabled = bool<br> namespace = string<br> environment = string<br> stage = string<br> name = string<br> delimiter = string<br> attributes = list(string)<br> tags = map(string)<br> additional_tag_map = map(string)<br> regex_replace_chars = string<br> label_order = list(string)<br> id_length_limit = number<br> })</pre> | <pre>{<br> "additional_tag_map": {},<br> "attributes": [],<br> "delimiter": null,<br> "enabled": true,<br> "environment": null,<br> "id_length_limit": null,<br> "label_order": [],<br> "name": null,<br> "namespace": null,<br> "regex_replace_chars": null,<br> "stage": null,<br> "tags": {}<br>}</pre> |    no    |
| <a name="input_core_instance_group_autoscaling_policy"></a> [core_instance_group_autoscaling_policy](#input_core_instance_group_autoscaling_policy)                         | String containing the EMR Auto Scaling Policy JSON for the Core instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_core_instance_group_bid_price"></a> [core_instance_group_bid_price](#input_core_instance_group_bid_price)                                                    | Bid price for each EC2 instance in the Core instance group, expressed in USD. By setting this attribute, the instance group is being declared as a Spot Instance, and will implicitly create a Spot request. Leave this blank to use On-Demand Instances                                                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_core_instance_group_ebs_iops"></a> [core_instance_group_ebs_iops](#input_core_instance_group_ebs_iops)                                                       | The number of I/O operations per second (IOPS) that the Core volume supports                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_core_instance_group_ebs_size"></a> [core_instance_group_ebs_size](#input_core_instance_group_ebs_size)                                                       | Core instances volume size, in gibibytes (GiB)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `number`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_core_instance_group_ebs_type"></a> [core_instance_group_ebs_type](#input_core_instance_group_ebs_type)                                                       | Core instances volume type. Valid options are `gp2`, `io1`, `standard` and `st1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `"gp2"`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_core_instance_group_ebs_volumes_per_instance"></a> [core_instance_group_ebs_volumes_per_instance](#input_core_instance_group_ebs_volumes_per_instance)       | The number of EBS volumes with this configuration to attach to each EC2 instance in the Core instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_core_instance_group_instance_count"></a> [core_instance_group_instance_count](#input_core_instance_group_instance_count)                                     | Target number of instances for the Core instance group. Must be at least 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_core_instance_group_instance_type"></a> [core_instance_group_instance_type](#input_core_instance_group_instance_type)                                        | EC2 instance type for all instances in the Core instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_create_task_instance_group"></a> [create_task_instance_group](#input_create_task_instance_group)                                                             | Whether to create an instance group for Task nodes. For more info: https://www.terraform.io/docs/providers/aws/r/emr_instance_group.html, https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-master-core-task-nodes.html                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_create_vpc_endpoint_s3"></a> [create_vpc_endpoint_s3](#input_create_vpc_endpoint_s3)                                                                         | Set to false to prevent the module from creating VPC S3 Endpoint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_custom_ami_id"></a> [custom_ami_id](#input_custom_ami_id)                                                                                                    | A custom Amazon Linux AMI for the cluster (instead of an EMR-owned AMI). Available in Amazon EMR version 5.7.0 and later                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_delimiter"></a> [delimiter](#input_delimiter)                                                                                                                | Delimiter to be used between `namespace`, `environment`, `stage`, `name` and `attributes`.<br>Defaults to `-` (hyphen). Set to `""` to use no delimiter at all.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_descriptor_formats"></a> [descriptor_formats](#input_descriptor_formats)                                                                                     | Describe additional descriptors to be output in the `descriptors` output map.<br>Map of maps. Keys are names of descriptors. Values are maps of the form<br>`{<br> format = string<br> labels = list(string)<br>}`<br>(Type is `any` so the map values can later be enhanced to provide additional options.)<br>`format` is a Terraform format string to be passed to the `format()` function.<br>`labels` is a list of labels, in order, to pass to `format()` function.<br>Label values will be normalized before being passed to `format()` so they will be<br>identical to how they appear in `id`.<br>Default is `{}` (`descriptors` output will be empty). | `any`                                                                                                                                                                                                                                                                                                                                            | `{}`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_ebs_root_volume_size"></a> [ebs_root_volume_size](#input_ebs_root_volume_size)                                                                               | Size in GiB of the EBS root device volume of the Linux AMI that is used for each EC2 instance. Available in Amazon EMR version 4.x and later                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                                                                                                                                                                                                                                         | `10`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_ec2_autoscaling_role_enabled"></a> [ec2_autoscaling_role_enabled](#input_ec2_autoscaling_role_enabled)                                                       | If set to `false`, will use `existing_ec2_autoscaling_role_arn` for an existing EC2 autoscaling IAM role that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_ec2_autoscaling_role_permissions_boundary"></a> [ec2_autoscaling_role_permissions_boundary](#input_ec2_autoscaling_role_permissions_boundary)                | The Permissions Boundary ARN to apply to the EC2 Autoscaling Role.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_ec2_role_enabled"></a> [ec2_role_enabled](#input_ec2_role_enabled)                                                                                           | If set to `false`, will use `existing_ec2_instance_profile_arn` for an existing EC2 IAM role that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_ec2_role_permissions_boundary"></a> [ec2_role_permissions_boundary](#input_ec2_role_permissions_boundary)                                                    | The Permissions Boundary ARN to apply to the EC2 Role.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_emr_role_permissions_boundary"></a> [emr_role_permissions_boundary](#input_emr_role_permissions_boundary)                                                    | The Permissions Boundary ARN to apply to the EMR Role.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_enabled"></a> [enabled](#input_enabled)                                                                                                                      | Set to false to prevent the module from creating any resources                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `bool`                                                                                                                                                                                                                                                                                                                                           | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_environment"></a> [environment](#input_environment)                                                                                                          | Environment, e.g. 'uw2', 'us-west-2', OR 'prod', 'staging', 'dev', 'UAT'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_existing_ec2_autoscaling_role_arn"></a> [existing_ec2_autoscaling_role_arn](#input_existing_ec2_autoscaling_role_arn)                                        | ARN of an existing EC2 autoscaling role to attach to the cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_existing_ec2_instance_profile_arn"></a> [existing_ec2_instance_profile_arn](#input_existing_ec2_instance_profile_arn)                                        | ARN of an existing EC2 instance profile                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_existing_service_role_arn"></a> [existing_service_role_arn](#input_existing_service_role_arn)                                                                | ARN of an existing EMR service role to attach to the cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_id_length_limit"></a> [id_length_limit](#input_id_length_limit)                                                                                              | Limit `id` to this many characters.<br>Set to `0` for unlimited length.<br>Set to `null` for default, which is `0`.<br>Does not affect `id_full`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `number`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_keep_job_flow_alive_when_no_steps"></a> [keep_job_flow_alive_when_no_steps](#input_keep_job_flow_alive_when_no_steps)                                        | Switch on/off run cluster with no steps or when all steps are complete                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_kerberos_ad_domain_join_password"></a> [kerberos_ad_domain_join_password](#input_kerberos_ad_domain_join_password)                                           | The Active Directory password for ad_domain_join_user. Terraform cannot perform drift detection of this configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_kerberos_ad_domain_join_user"></a> [kerberos_ad_domain_join_user](#input_kerberos_ad_domain_join_user)                                                       | Required only when establishing a cross-realm trust with an Active Directory domain. A user with sufficient privileges to join resources to the domain. Terraform cannot perform drift detection of this configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_kerberos_cross_realm_trust_principal_password"></a> [kerberos_cross_realm_trust_principal_password](#input_kerberos_cross_realm_trust_principal_password)    | Required only when establishing a cross-realm trust with a KDC in a different realm. The cross-realm principal password, which must be identical across realms. Terraform cannot perform drift detection of this configuration.                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_kerberos_enabled"></a> [kerberos_enabled](#input_kerberos_enabled)                                                                                           | Set to true if EMR cluster will use kerberos_attributes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_kerberos_kdc_admin_password"></a> [kerberos_kdc_admin_password](#input_kerberos_kdc_admin_password)                                                          | The password used within the cluster for the kadmin service on the cluster-dedicated KDC, which maintains Kerberos principals, password policies, and keytabs for the cluster. Terraform cannot perform drift detection of this configuration.                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_kerberos_realm"></a> [kerberos_realm](#input_kerberos_realm)                                                                                                 | The name of the Kerberos realm to which all nodes in a cluster belong. For example, EC2.INTERNAL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `"EC2.INTERNAL"`                                                                                                                                                                                                                                                                                           |    no    |
| <a name="input_key_name"></a> [key_name](#input_key_name)                                                                                                                   | Amazon EC2 key pair that can be used to ssh to the master node as the user called `hadoop`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_label_key_case"></a> [label_key_case](#input_label_key_case)                                                                                                 | Controls the letter case of the `tags` keys (label names) for tags generated by this module.<br>Does not affect keys of tags passed in via the `tags` input.<br>Possible values: `lower`, `title`, `upper`.<br>Default value: `title`.                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_label_order"></a> [label_order](#input_label_order)                                                                                                          | The naming order of the id output and Name tag.<br>Defaults to ["namespace", "environment", "stage", "name", "attributes"].<br>You can omit any of the 5 elements, but at least one must be present.                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_label_value_case"></a> [label_value_case](#input_label_value_case)                                                                                           | Controls the letter case of ID elements (labels) as included in `id`,<br>set as tag values, and output by this module individually.<br>Does not affect values of tags passed in via the `tags` input.<br>Possible values: `lower`, `title`, `upper` and `none` (no transformation).<br>Set this to `title` and set `delimiter` to `""` to yield Pascal Case IDs.<br>Default value: `lower`.                                                                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_labels_as_tags"></a> [labels_as_tags](#input_labels_as_tags)                                                                                                 | Set of labels (ID elements) to include as tags in the `tags` output.<br>Default is to include all labels.<br>Tags with empty values will not be included in the `tags` output.<br>Set to `[]` to suppress all generated tags.<br>**Notes:**<br> The value of the `name` tag, if included, will be the `id`, not the `name`.<br> Unlike other `null-label` inputs, the initial setting of `labels_as_tags` cannot be<br> changed in later chained modules. Attempts to change it will be silently ignored.                                                                                                                                                        | `set(string)`                                                                                                                                                                                                                                                                                                                                    | <pre>[<br> "default"<br>]</pre>                                                                                                                                                                                                                                                                            |    no    |
| <a name="input_log_uri"></a> [log_uri](#input_log_uri)                                                                                                                      | The path to the Amazon S3 location where logs for this cluster are stored                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_managed_master_security_group"></a> [managed_master_security_group](#input_managed_master_security_group)                                                    | The id of the existing managed security group that will be used for EMR master node. If empty, a new security group will be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_managed_slave_security_group"></a> [managed_slave_security_group](#input_managed_slave_security_group)                                                       | The id of the existing managed security group that will be used for EMR core & task nodes. If empty, a new security group will be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_master_allowed_cidr_blocks"></a> [master_allowed_cidr_blocks](#input_master_allowed_cidr_blocks)                                                             | List of CIDR blocks to be allowed to access the master instances                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_master_allowed_security_groups"></a> [master_allowed_security_groups](#input_master_allowed_security_groups)                                                 | List of security group ids to be allowed to connect to the master instances                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_master_dns_name"></a> [master_dns_name](#input_master_dns_name)                                                                                              | (Required) - Name of the ALB record to create in the parent DNS zone specified by `zone_id`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_master_instance_group_bid_price"></a> [master_instance_group_bid_price](#input_master_instance_group_bid_price)                                              | Bid price for each EC2 instance in the Master instance group, expressed in USD. By setting this attribute, the instance group is being declared as a Spot Instance, and will implicitly create a Spot request. Leave this blank to use On-Demand Instances                                                                                                                                                                                                                                                                                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_master_instance_group_ebs_iops"></a> [master_instance_group_ebs_iops](#input_master_instance_group_ebs_iops)                                                 | The number of I/O operations per second (IOPS) that the Master volume supports                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `number`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_master_instance_group_ebs_size"></a> [master_instance_group_ebs_size](#input_master_instance_group_ebs_size)                                                 | Master instances volume size, in gibibytes (GiB)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `number`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_master_instance_group_ebs_type"></a> [master_instance_group_ebs_type](#input_master_instance_group_ebs_type)                                                 | Master instances volume type. Valid options are `gp2`, `io1`, `standard` and `st1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `string`                                                                                                                                                                                                                                                                                                                                         | `"gp2"`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_master_instance_group_ebs_volumes_per_instance"></a> [master_instance_group_ebs_volumes_per_instance](#input_master_instance_group_ebs_volumes_per_instance) | The number of EBS volumes with this configuration to attach to each EC2 instance in the Master instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_master_instance_group_instance_count"></a> [master_instance_group_instance_count](#input_master_instance_group_instance_count)                               | Target number of instances for the Master instance group. Must be at least 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_master_instance_group_instance_type"></a> [master_instance_group_instance_type](#input_master_instance_group_instance_type)                                  | EC2 instance type for all instances in the Master instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_name"></a> [name](#input_name)                                                                                                                               | Solution name, e.g. 'app' or 'jenkins'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_namespace"></a> [namespace](#input_namespace)                                                                                                                | Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_regex_replace_chars"></a> [regex_replace_chars](#input_regex_replace_chars)                                                                                  | Regex to replace chars with empty string in `namespace`, `environment`, `stage` and `name`.<br>If not set, `"/[^a-zA-Z0-9-]/"` is used to remove all characters other than hyphens, letters and digits.                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_region"></a> [region](#input_region)                                                                                                                         | AWS region                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_release_label"></a> [release_label](#input_release_label)                                                                                                    | The release label for the Amazon EMR release. https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-release-5x.html                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                                                                         | `"emr-5.25.0"`                                                                                                                                                                                                                                                                                             |    no    |
| <a name="input_route_table_id"></a> [route_table_id](#input_route_table_id)                                                                                                 | Route table ID for the VPC S3 Endpoint when launching the EMR cluster in a private subnet. Required when `subnet_type` is `private`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_scale_down_behavior"></a> [scale_down_behavior](#input_scale_down_behavior)                                                                                  | The way that individual Amazon EC2 instances terminate when an automatic scale-in activity occurs or an instance group is resized                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_security_configuration"></a> [security_configuration](#input_security_configuration)                                                                         | The security configuration name to attach to the EMR cluster. Only valid for EMR clusters with `release_label` 4.8.0 or greater. See https://www.terraform.io/docs/providers/aws/r/emr_security_configuration.html for more info                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_service_access_security_group"></a> [service_access_security_group](#input_service_access_security_group)                                                    | The id of the existing additional security group that will be used for EMR core & task nodes. If empty, a new security group will be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                         | `""`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_service_role_enabled"></a> [service_role_enabled](#input_service_role_enabled)                                                                               | If set to `false`, will use `existing_service_role_arn` for an existing IAM role that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_slave_allowed_cidr_blocks"></a> [slave_allowed_cidr_blocks](#input_slave_allowed_cidr_blocks)                                                                | List of CIDR blocks to be allowed to access the slave instances                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_slave_allowed_security_groups"></a> [slave_allowed_security_groups](#input_slave_allowed_security_groups)                                                    | List of security group ids to be allowed to connect to the slave instances                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `list(string)`                                                                                                                                                                                                                                                                                                                                   | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_stage"></a> [stage](#input_stage)                                                                                                                            | Stage, e.g. 'prod', 'staging', 'dev', OR 'source', 'build', 'test', 'deploy', 'release'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_step_concurrency_level"></a> [step_concurrency_level](#input_step_concurrency_level)                                                                         | The number of steps that can be executed concurrently. You can specify a maximum of 256 steps. Only valid for EMR clusters with release_label 5.28.0 or greater.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `number`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_steps"></a> [steps](#input_steps)                                                                                                                            | List of steps to run when creating the cluster.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | <pre>list(object({<br> name = string<br> action_on_failure = string<br> hadoop_jar_step = object({<br> args = list(string)<br> jar = string<br> main_class = string<br> properties = map(string)<br> })<br> }))</pre>                                                                                                                            | `[]`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_subnet_id"></a> [subnet_id](#input_subnet_id)                                                                                                                | VPC subnet ID where you want the job flow to launch. Cannot specify the `cc1.4xlarge` instance type for nodes of a job flow launched in a Amazon VPC                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_subnet_type"></a> [subnet_type](#input_subnet_type)                                                                                                          | Type of VPC subnet ID where you want the job flow to launch. Supported values are `private` or `public`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                         | `"private"`                                                                                                                                                                                                                                                                                                |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                                               | Additional tags (e.g. `map('BusinessUnit','XYZ')`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `map(string)`                                                                                                                                                                                                                                                                                                                                    | `{}`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_task_instance_group_autoscaling_policy"></a> [task_instance_group_autoscaling_policy](#input_task_instance_group_autoscaling_policy)                         | String containing the EMR Auto Scaling Policy JSON for the Task instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_task_instance_group_bid_price"></a> [task_instance_group_bid_price](#input_task_instance_group_bid_price)                                                    | Bid price for each EC2 instance in the Task instance group, expressed in USD. By setting this attribute, the instance group is being declared as a Spot Instance, and will implicitly create a Spot request. Leave this blank to use On-Demand Instances                                                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_task_instance_group_ebs_iops"></a> [task_instance_group_ebs_iops](#input_task_instance_group_ebs_iops)                                                       | The number of I/O operations per second (IOPS) that the Task volume supports                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_task_instance_group_ebs_optimized"></a> [task_instance_group_ebs_optimized](#input_task_instance_group_ebs_optimized)                                        | Indicates whether an Amazon EBS volume in the Task instance group is EBS-optimized. Changing this forces a new resource to be created                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_task_instance_group_ebs_size"></a> [task_instance_group_ebs_size](#input_task_instance_group_ebs_size)                                                       | Task instances volume size, in gibibytes (GiB)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `number`                                                                                                                                                                                                                                                                                                                                         | `10`                                                                                                                                                                                                                                                                                                       |    no    |
| <a name="input_task_instance_group_ebs_type"></a> [task_instance_group_ebs_type](#input_task_instance_group_ebs_type)                                                       | Task instances volume type. Valid options are `gp2`, `io1`, `standard` and `st1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                                                                         | `"gp2"`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_task_instance_group_ebs_volumes_per_instance"></a> [task_instance_group_ebs_volumes_per_instance](#input_task_instance_group_ebs_volumes_per_instance)       | The number of EBS volumes with this configuration to attach to each EC2 instance in the Task instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_task_instance_group_instance_count"></a> [task_instance_group_instance_count](#input_task_instance_group_instance_count)                                     | Target number of instances for the Task instance group. Must be at least 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `number`                                                                                                                                                                                                                                                                                                                                         | `1`                                                                                                                                                                                                                                                                                                        |    no    |
| <a name="input_task_instance_group_instance_type"></a> [task_instance_group_instance_type](#input_task_instance_group_instance_type)                                        | EC2 instance type for all instances in the Task instance group                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_tenant"></a> [tenant](#input_tenant)                                                                                                                         | ID element \_(Rarely used, not included by default)\_. A customer identifier, indicating who this instance of a resource is for                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_termination_protection"></a> [termination_protection](#input_termination_protection)                                                                         | Switch on/off termination protection (default is false, except when using multiple master nodes). Before attempting to destroy the resource when termination protection is enabled, this configuration must be applied with its value set to false                                                                                                                                                                                                                                                                                                                                                                                                               | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_use_existing_additional_master_security_group"></a> [use_existing_additional_master_security_group](#input_use_existing_additional_master_security_group)    | If set to `true`, will use variable `additional_master_security_group` using an existing security group that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_use_existing_additional_slave_security_group"></a> [use_existing_additional_slave_security_group](#input_use_existing_additional_slave_security_group)       | If set to `true`, will use variable `additional_slave_security_group` using an existing security group that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_use_existing_managed_master_security_group"></a> [use_existing_managed_master_security_group](#input_use_existing_managed_master_security_group)             | If set to `true`, will use variable `managed_master_security_group` using an existing security group that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_use_existing_managed_slave_security_group"></a> [use_existing_managed_slave_security_group](#input_use_existing_managed_slave_security_group)                | If set to `true`, will use variable `managed_slave_security_group` using an existing security group that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_use_existing_service_access_security_group"></a> [use_existing_service_access_security_group](#input_use_existing_service_access_security_group)             | If set to `true`, will use variable `service_access_security_group` using an existing security group that was created outside of this module                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `bool`                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                                                                                                                                                                                                                                    |    no    |
| <a name="input_visible_to_all_users"></a> [visible_to_all_users](#input_visible_to_all_users)                                                                               | Whether the job flow is visible to all IAM users of the AWS account associated with the job flow                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                                                                                                                                                                                                                                     |    no    |
| <a name="input_vpc_id"></a> [vpc_id](#input_vpc_id)                                                                                                                         | VPC ID to create the cluster in (e.g. `vpc-a22222ee`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                                                                         | n/a                                                                                                                                                                                                                                                                                                        |   yes    |
| <a name="input_zone_id"></a> [zone_id](#input_zone_id)                                                                                                                      | Route53 parent zone ID. If provided (not empty), the module will create sub-domain DNS records for the masters and slaves                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                                                                         | `null`                                                                                                                                                                                                                                                                                                     |    no    |

## Outputs

| Name                                                                                                        | Description                                                                  |
| ----------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
| <a name="output_cluster_id"></a> [cluster_id](#output_cluster_id)                                           | EMR cluster ID                                                               |
| <a name="output_cluster_name"></a> [cluster_name](#output_cluster_name)                                     | EMR cluster name                                                             |
| <a name="output_ec2_role"></a> [ec2_role](#output_ec2_role)                                                 | Role name of EMR EC2 instances so users can attach more policies             |
| <a name="output_master_host"></a> [master_host](#output_master_host)                                        | Name of the cluster CNAME record for the master nodes in the parent DNS zone |
| <a name="output_master_public_dns"></a> [master_public_dns](#output_master_public_dns)                      | Master public DNS                                                            |
| <a name="output_master_security_group_id"></a> [master_security_group_id](#output_master_security_group_id) | Master security group ID                                                     |
| <a name="output_slave_security_group_id"></a> [slave_security_group_id](#output_slave_security_group_id)    | Slave security group ID                                                      |

## Help

**Got a question?** We got answers.

File a Github [issue](humn-ai/tf-mod-aws-emr-cluster/issues), or message us on [Slack][slack]

### Contributors

| [![Erik Osterman][osterman_avatar]][osterman_homepage]<br/>[Erik Osterman][osterman_homepage] | [![Andriy Knysh][aknysh_avatar]][aknysh_homepage]<br/>[Andriy Knysh][aknysh_homepage] | [![Igor Rodionov][goruha_avatar]][goruha_homepage]<br/>[Igor Rodionov][goruha_homepage] | [![Callum Robertson][callumccr_avatar]][callumccr_homepage]<br/>[Callum Robertson][callumccr_homepage] | [![Lawrence Warren][lawrencewarren_avatar]][lawrencewarren_homepage]<br/>[Lawrence Warren][lawrencewarren_homepage] |
| --------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------- |

[osterman_homepage]: https://github.com/osterman
[osterman_avatar]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png
[aknysh_homepage]: https://github.com/aknysh
[aknysh_avatar]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png
[goruha_homepage]: https://github.com/goruha
[goruha_avatar]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png
[callumccr_homepage]: https://github.com/callumccr
[callumccr_avatar]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png
[lawrencewarren_homepage]: https://github.com/LawrenceWarren
[lawrencewarren_avatar]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png

---

---

[![README Footer][logo]][website]

[logo]: https://wariva-github-assets.s3.eu-west-2.amazonaws.com/logo.png
[website]: https://www.linkedin.com/company/52152765/admin/
[github]: https://github.com/Callumccr
[slack]: https://wariva.slack.com
[linkedin]: https://www.linkedin.com/in/callum-robertson-1a55b6110/
[terraform_modules]: https://github.com/Callumccr
